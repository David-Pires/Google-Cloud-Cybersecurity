---

# ğŸ§± VPC Firewalls & Logging Guide

### *Guia de Firewalls VPC e Logs*

VPC firewall rules control incoming (**Ingress**) and outgoing (**Egress**) traffic to Virtual Machine (VM) instances. By default, all incoming traffic from outside the network is blocked, following the security principle of "Deny by Default."

*Regras de firewall VPC controlam o trÃ¡fego de entrada (**Ingress**) e saÃ­da (**Egress**) das instÃ¢ncias de VM. Por padrÃ£o, todo trÃ¡fego de entrada vindo de fora da rede Ã© bloqueado, seguindo o princÃ­pio de seguranÃ§a de "Negar por PadrÃ£o".*

---

## ğŸ› ï¸ Configuring a Firewall Rule | Configurando uma Regra de Firewall

Ao criar uma regra no Google Cloud, estes sÃ£o os campos fundamentais que vocÃª deve definir:

| Field / Campo | ğŸ‡ºğŸ‡¸ Description | ğŸ‡§ğŸ‡· DescriÃ§Ã£o |
| --- | --- | --- |
| **Priority** | Order of application (Lower numbers = Higher priority). | Ordem de aplicaÃ§Ã£o (NÃºmeros menores = Maior prioridade). |
| **Direction** | Ingress (Inbound) or Egress (Outbound). | Ingress (Entrada) ou Egress (SaÃ­da). |
| **Action** | Allow or Deny the traffic. | Permitir (Allow) ou Negar (Deny) o trÃ¡fego. |
| **Targets** | Specific VM instances, Tags, or Service Accounts. | InstÃ¢ncias de VM especÃ­ficas, Tags ou Contas de ServiÃ§o. |
| **Source/Dest** | IP ranges in CIDR notation (ex: `10.128.0.0/9`). | Intervalos de IP em notaÃ§Ã£o CIDR. |
| **Protocols/Ports** | TCP, UDP and specific ports (ex: `80`, `443`). | Protocolos e portas especÃ­ficas. |

---

## ğŸ“‹ Monitoring with Logs | Monitoramento com Logs

O monitoramento Ã© essencial para validar se as regras estÃ£o funcionando e para identificar ataques.

### 1. Firewall Rules Logs

**ğŸ‡ºğŸ‡¸ English:** Records each time a specific rule allows or denies traffic. Use this to verify if your security policies are effectively blocking malicious IPs.
**ğŸ‡§ğŸ‡· PortuguÃªs:** *Registra cada vez que uma regra especÃ­fica permite ou nega trÃ¡fego. Use isto para verificar se suas polÃ­ticas de seguranÃ§a estÃ£o bloqueando IPs maliciosos efetivamente.*

### 2. VPC Flow Logs

**ğŸ‡ºğŸ‡¸ English:** Records sample network flows entering and exiting VMs. Ideal for monitoring traffic patterns, identifying threats, and troubleshooting connectivity.
**ğŸ‡§ğŸ‡· PortuguÃªs:** *Registra fluxos de rede entrando e saindo de VMs. Ideal para monitorar padrÃµes de trÃ¡fego, identificar ameaÃ§as e resolver problemas de conectividade.*

---

## ğŸ” Logs Explorer: Components | Componentes do Logs Explorer

Para analisar os logs no Google Cloud Console, vocÃª usarÃ¡ o **Logs Explorer**:

1. **Query Editor:** Onde vocÃª constrÃ³i filtros (ex: filtrar apenas trÃ¡fego negado).
2. **Log Fields:** Mostra logs divididos por tipo de recurso e severidade.
3. **Histogram:** VisualizaÃ§Ã£o da distribuiÃ§Ã£o de logs ao longo do tempo.
4. **Query Results:** Onde os registros detalhados aparecem para anÃ¡lise.

---

## ğŸ›¡ï¸ Analyst's Insight | Insight do Analista

**ğŸ‡ºğŸ‡¸ English:**
A common mistake is leaving a rule with a high priority (like 1000) that allows all traffic, which might override more specific "Deny" rules. Always use **Target Tags** or **Service Accounts** instead of "All instances in the network" to maintain a granular security posture at Cymbal Bank.

**ğŸ‡§ğŸ‡· PortuguÃªs:**
*Um erro comum Ã© deixar uma regra com alta prioridade (como 1000) que permite todo o trÃ¡fego, o que pode anular regras de "Negar" mais especÃ­ficas. Sempre use **Target Tags** ou **Contas de ServiÃ§o** em vez de "Todas as instÃ¢ncias na rede" para manter uma postura de seguranÃ§a granular no Cymbal Bank.*

---

