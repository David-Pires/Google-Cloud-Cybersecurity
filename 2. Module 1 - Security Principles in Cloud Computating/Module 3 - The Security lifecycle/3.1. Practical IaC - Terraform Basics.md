

---

# ğŸ—ï¸ Practical IaC: Terraform Basics | IaC PrÃ¡tica: Fundamentos do Terraform

This document provides a practical example of how to declare cloud infrastructure using Terraform. We define a VPC and a Firewall rule to illustrate the **Declarative Approach** and **Security as Code**.
*Este documento fornece um exemplo prÃ¡tico de como declarar infraestrutura em nuvem usando Terraform. Definimos uma VPC e uma regra de Firewall para ilustrar a **Abordagem Declarativa** e **SeguranÃ§a como CÃ³digo**.*

---

## ğŸ’» The Configuration Code | O CÃ³digo de ConfiguraÃ§Ã£o

**ğŸ‡ºğŸ‡¸ English:**
The following code creates a private network (VPC) and a firewall rule that allows only **HTTPS (Port 443)** traffic, following the **Principle of Least Privilege**.

**ğŸ‡§ğŸ‡· PortuguÃªs:**
*O cÃ³digo a seguir cria uma rede privada (VPC) e uma regra de firewall que permite apenas trÃ¡fego **HTTPS (Porta 443)**, seguindo o **PrincÃ­pio do Menor PrivilÃ©gio**.*

```hcl
# ğŸ‡ºğŸ‡¸ Define the Provider (Google Cloud)
# ğŸ‡§ğŸ‡· Define o Provedor (Google Cloud)
provider "google" {
  project = "seu-projeto-id"
  region  = "us-central1"
}

# ğŸ—ï¸ Create a VPC Network | Criar uma Rede VPC
resource "google_compute_network" "vpc_network" {
  name                    = "secure-vpc-network"
  auto_create_subnetworks = false
}

# ğŸ”¥ Create a Firewall Rule | Criar Regra de Firewall
resource "google_compute_firewall" "allow_https" {
  name    = "allow-https"
  network = google_compute_network.vpc_network.name

  allow {
    protocol = "tcp"
    ports    = ["443"]
  }

  # ğŸ‡ºğŸ‡¸ Source IP ranges to allow (Best Practice: define specific IPs)
  # ğŸ‡§ğŸ‡· Intervalos de IP de origem (Boa prÃ¡tica: definir IPs especÃ­ficos)
  source_ranges = ["0.0.0.0/0"] 
  target_tags   = ["https-server"]
}

```

---

## ğŸ“– Key Commands | Comandos Principais

Para aplicar esse cÃ³digo, o fluxo de trabalho do Terraform segue trÃªs passos principais:

1. **`terraform init`**:
* **ğŸ‡ºğŸ‡¸**: Initializes the directory and downloads the Google Cloud provider.
* **ğŸ‡§ğŸ‡·**: *Inicializa o diretÃ³rio e baixa o provedor do Google Cloud.*


2. **`terraform plan`**:
* **ğŸ‡ºğŸ‡¸**: Shows exactly what will be created without making changes yet (Prevents errors!).
* **ğŸ‡§ğŸ‡·**: *Mostra exatamente o que serÃ¡ criado sem fazer mudanÃ§as ainda (Evita erros!).*


3. **`terraform apply`**:
* **ğŸ‡ºğŸ‡¸**: Executes the changes to achieve the **Desired State**.
* **ğŸ‡§ğŸ‡·**: *Executa as mudanÃ§as para atingir o **Estado Desejado**.*



---

## ğŸ›¡ï¸ Security Observations | ObservaÃ§Ãµes de SeguranÃ§a

**ğŸ‡ºğŸ‡¸ English:**

* **Version Control:** By keeping this file in GitHub, you have a full audit log of who modified the firewall rules.
* **Preventing Drift:** If someone manually changes a rule in the Google Cloud Console, running `terraform apply` again will automatically revert the infrastructure to the secure state defined in the code.

**ğŸ‡§ğŸ‡· PortuguÃªs:**

* ***Controle de VersÃ£o:** Ao manter este arquivo no GitHub, vocÃª tem um log de auditoria completo de quem modificou as regras de firewall.*
* ***PrevenÃ§Ã£o de Drift:** Se alguÃ©m alterar manualmente uma regra no Console do Google Cloud, executar o `terraform apply` novamente reverterÃ¡ automaticamente a infraestrutura para o estado seguro definido no cÃ³digo.*

---

*Reference: HashiCorp Terraform & Google Cloud Documentation.*

---


