

---

# ğŸ› ï¸ Implementing Cloud Build | Implementando o Cloud Build

This document demonstrates how to use Google Cloud Build to automate security tasks through a configuration file, ensuring every build is scanned and verified.
*Este documento demonstra como usar o Google Cloud Build para automatizar tarefas de seguranÃ§a via arquivo de configuraÃ§Ã£o, garantindo que cada build seja verificado.*

---

## ğŸ“ Table of Contents | Ãndice

1. [The Configuration File (YAML)](https://www.google.com/search?q=%23-the-configuration-file-yaml)
2. [Security Pipeline Example](https://www.google.com/search?q=%23-security-pipeline-example)
3. [Generating Provenance (SLSA)](https://www.google.com/search?q=%23-generating-provenance-slsa)
4. [Deployment with Service Accounts](https://www.google.com/search?q=%23-deployment-with-service-accounts)

---

## ğŸ“œ 1. The Configuration File | O Arquivo de ConfiguraÃ§Ã£o

**ğŸ‡ºğŸ‡¸ English:**
Cloud Build uses a file named `cloudbuild.yaml`. Each **step** in this file is executed in a Docker container. This ensures that your security tools (like the Python scanner we created) run in a clean, predictable environment every time.

**ğŸ‡§ğŸ‡· PortuguÃªs:**
*O Cloud Build utiliza um arquivo chamado `cloudbuild.yaml`. Cada **passo** (step) neste arquivo Ã© executado em um container Docker. Isso garante que suas ferramentas de seguranÃ§a (como o scanner Python que criamos) rodem em um ambiente limpo e previsÃ­vel todas as vezes.*

---

## ğŸ›¡ï¸ 2. Security Pipeline Example | Exemplo de Pipeline de SeguranÃ§a

Abaixo, um exemplo de como seria o seu `cloudbuild.yaml` integrando o seu script de Python e gerando uma imagem segura:

```yaml
steps:
  # ğŸ‡ºğŸ‡¸ Step 1: Run our Python Secret Scanner (SAST)
  # ğŸ‡§ğŸ‡· Passo 1: Executar nosso Scanner de Segredos (SAST)
  - name: 'python:3.9-slim'
    entrypoint: 'python'
    args: ['secret_scanner.py']

  # ğŸ‡ºğŸ‡¸ Step 2: Build the Docker Image
  # ğŸ‡§ğŸ‡· Passo 2: Construir a Imagem Docker
  - name: 'gcr.io/cloud-builders/docker'
    args: ['build', '-t', 'gcr.io/$PROJECT_ID/my-secure-app', '.']

  # ğŸ‡ºğŸ‡¸ Step 3: Scan the built image for vulnerabilities (SCA)
  # ğŸ‡§ğŸ‡· Passo 3: Escanear a imagem construÃ­da em busca de vulnerabilidades
  - name: 'gcr.io/cloud-builders/gke-deploy'
    args: ['prepare', '--image', 'gcr.io/$PROJECT_ID/my-secure-app']

images:
  - 'gcr.io/$PROJECT_ID/my-secure-app'

```

---

## ğŸ’ƒ 3. Generating Provenance (SLSA) | Gerando ProveniÃªncia

**ğŸ‡ºğŸ‡¸ English:**
To meet **SLSA Level 1 and 2**, Cloud Build can automatically generate **provenance**. This is a verifiable record that proves the artifact was built by Google Cloud Build and hasn't been tampered with.

**ğŸ‡§ğŸ‡· PortuguÃªs:**
*Para atingir os **NÃ­veis 1 e 2 do SLSA**, o Cloud Build pode gerar automaticamente a **proveniÃªncia**. Este Ã© um registro verificÃ¡vel que prova que o artefato foi construÃ­do pelo Google Cloud Build e nÃ£o foi adulterado.*

> **Feature:** No Console do Google Cloud, ao ativar a "AtestaÃ§Ã£o de Build", vocÃª garante que a imagem sÃ³ poderÃ¡ ser implantada se tiver passado por essa esteira oficial.

---

## ğŸ¤– 4. Using Service Accounts | Usando Contas de ServiÃ§o

**ğŸ‡ºğŸ‡¸ English:**
By default, Cloud Build uses a Service Account to perform actions. As a security best practice, you should grant this account the **minimum permissions** needed (e.g., *Artifact Registry Writer*) and avoid using your personal owner credentials.

**ğŸ‡§ğŸ‡· PortuguÃªs:**
*Por padrÃ£o, o Cloud Build usa uma Conta de ServiÃ§o para realizar aÃ§Ãµes. Como boa prÃ¡tica de seguranÃ§a, vocÃª deve conceder a esta conta as **permissÃµes mÃ­nimas** necessÃ¡rias (ex: *Artifact Registry Writer*) e evitar o uso de suas credenciais pessoais de proprietÃ¡rio.*

---

*Reference: Google Cloud Build Documentation - Continuous Integration/Continuous Deployment.*

---


